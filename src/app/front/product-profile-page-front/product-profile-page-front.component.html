<section class="section section-lg bg-gradient-default">

  <div class="container pt-lg pb-300">
    <div class="row text-center justify-content-center">
      <div class="col-lg-10">*
        <h1></h1>
        <h2 class="display-3 text-white">Product details</h2>
      </div>
    </div>
    <div class="row row-grid mt-5" style="text-align: center">
      <div class="col-lg-4">
        <div class="icon icon-lg icon-shape bg-gradient-white shadow rounded-circle text-primary"><i
          class="ni ni-money-coins ni-money-coins text-primary"></i></div>
        <h5 class="text-white mt-3">Price</h5>
        <h6 class="text-white mt-3">{{currentProduct.price}}</h6>
      </div>
      <div class="col-lg-4">
        <div class="icon icon-lg icon-shape bg-gradient-white shadow rounded-circle text-primary"><i
          class="ni ni-app text-primary"></i></div>
        <h5 class="text-white mt-3">Stock</h5>
        <h6 class="text-white mt-3">{{currentProduct.stock}}</h6>
      </div>
      <div class="col-lg-4">
        <div class="icon icon-lg icon-shape bg-gradient-white shadow rounded-circle text-primary"><i
          class="ni ni-bag-17 text-primary"></i></div>
        <h5 class="text-white mt-3">Type</h5>
        <h6 class="text-white mt-3">{{currentProduct.type}}</h6>
      </div>
    </div>
  </div>

</section>

<div style="margin-top: 5em;">
  <h1></h1>
</div>
<div class="container">
  <div class="row justify-content-center mt--300">
    <div class="col-lg-8">
      <div class="card bg-gradient-secondary shadow">
        <div class="card-body p-lg-5"><h4
          class="mb-1">{{currentProduct.reference}}</h4>
          <p class="mt-0">{{currentProduct.description}}</p>

          <div class="form-group mt-5">
            <div class="input-group input-group-alternative">
              <div class="input-group-prepend"><span class="input-group-text"><i
                class="ni ni-archive-2"></i></span></div>
              <input type="number" class="form-control form-control-muted" placeholder="Quantity" value="0"
                     [(ngModel)]="row.quantity" (keyup)="changeQuantityOnSurpassed()">
            </div>
          </div>
          <div class="form-group" *ngIf="isWithReduction=='avec reduction' && currentCart.client.fidelityScore > currentReductionRatio.fidelityScoreForEach">
            <div class="input-group input-group-alternative">
              <div class="input-group-prepend"><span class="input-group-text">
                <i class="ni ni-paper-diploma"></i></span></div>
              <input  class="form-control" placeholder="Point merci" [(ngModel)]="row.usedFidelityPoints" type="number" (keyup)="changeFidelityOnSurpassed()"></div>
          </div>

          <div role="tabpanel" class="tab-pane active" aria-labelledby="tab-selectbyid1" id="tab-selectbyid1-panel"
               aria-expanded="true">
            <div *ngIf="currentCart.client.fidelityScore > currentReductionRatio.fidelityScoreForEach " _ngcontent-c7="" class="custom-control custom-radio mb-3">
              <input _ngcontent-c7="" class="custom-control-input" value="avec reduction" id="customRadio5" name="custom-radio-2" type="radio" [(ngModel)]="isWithReduction">
              <label _ngcontent-c7="" class="custom-control-label" for="customRadio5">With reduction</label>
            </div>

            <div *ngIf="currentCart.client.fidelityScore > currentReductionRatio.fidelityScoreForEach" _ngcontent-c7="" class="custom-control custom-radio mb-3">
              <input _ngcontent-c7="" checked="" class="custom-control-input"  value="sans reduction" id="customRadio6" name="custom-radio-2"
                     type="radio" [(ngModel)]="isWithReduction" >
              <label _ngcontent-c7="" class="custom-control-label" for="customRadio6">Without reduction </label>
            </div>
          </div>
          <p style="margin-left: fill">Solde points merci: <b _ngcontent-c4="" style="color: #985f0d">{{currentCart.client.fidelityScore}} Points</b></p>
          <p style="margin-left: fill">Formule reduction: <b _ngcontent-c4="" style="color: #985f0d">{{currentReductionRatio.reductionRatio}} Dinars</b> pour chaque
            <b _ngcontent-c4="" style="color: #985f0d">{{currentReductionRatio.fidelityScoreForEach}} Points</b></p>
          <p style="margin-left: fill" *ngIf="currentReductionRatio.fidelityScoreForEach< currentCart.client.fidelityScore && isWithReduction=='avec reduction' && row.usedFidelityPoints>0 ">Total avec reduction: <b _ngcontent-c4="" style="color: #985f0d">{{row.finalPrice}} dinars</b></p>
          <p style="margin-left: fill">Total sans reduction : <b _ngcontent-c4="" style="color: #985f0d">{{row.quantity*currentProduct.price}} Dinars</b></p>
          <div>
            <button *ngIf="isUpdated==false" class="btn btn-default btn-round btn-block btn-lg" (click)="addProductToCart()" type="button" [routerLink]="'/front/products'">Add to cart
            </button>
            <button *ngIf="isUpdated==true" class="btn btn-default btn-round btn-block btn-lg" (click)="updateProductCart()" type="button" [routerLink]="'/front/products'">Mettre a jour au panier
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
